<div class="flex h-screen bg-gray-50">
  <!-- Mobile Overlay -->
  <div
    class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden transition-opacity duration-300"
    [class.hidden]="isSidebarCollapsed()"
    (click)="toggleSidebar()"
  ></div>

  <!-- Sidebar -->
  <aside
    class="bg-white shadow-lg transition-all duration-300 ease-in-out relative z-50 lg:relative"
    [class.-translate-x-full]="isSidebarCollapsed()"
    [class.fixed]="true"
    [class.lg:relative]="true"
    [class.lg:translate-x-0]="true"
    [class.w-16]="isSidebarCollapsed()"
    [class.w-64]="!isSidebarCollapsed()"
  >
    <!-- Sidebar Header -->
    <div class="flex items-center justify-between h-16 px-4 border-b border-gray-200">
      @if (!isSidebarCollapsed()) {
        <h1 class="text-xl font-bold text-gray-800">Admin Panel</h1>
      } @else {
        <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold text-sm">A</span>
        </div>
      }
      <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200" (click)="toggleSidebar()">
        <tui-icon
          class="w-5 h-5 text-gray-600"
          [icon]="isSidebarCollapsed() ? 'chevron_right' : 'chevron_left'"
        ></tui-icon>
      </button>
    </div>

    <!-- Navigation Menu -->
    <nav class="mt-6 px-2 flex-1 overflow-y-auto sidebar-scroll">
      <ul class="space-y-1">
        @for (item of menuItems(); track item.path) {
          <li>
            <a
              class="flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 group hover:bg-gray-100 hover:shadow-sm"
              routerLinkActive="bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-r-2 border-blue-700 shadow-sm"
              [class.justify-center]="isSidebarCollapsed()"
              [class.pl-3]="!isSidebarCollapsed()"
              [routerLink]="item.path"
              [title]="isSidebarCollapsed() ? item.title : ''"
            >
              <tui-icon
                class="w-5 h-5 text-gray-600 group-hover:text-gray-900 transition-colors duration-200"
                [class.mr-3]="!isSidebarCollapsed()"
                [icon]="item.icon"
              ></tui-icon>
              @if (!isSidebarCollapsed()) {
                <span class="truncate">{{ item.title }}</span>
              }
            </a>
          </li>
        }
      </ul>
    </nav>

    <!-- Sidebar Footer -->
    <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
      <app-profile-button [isCollapsed]="isSidebarCollapsed()"></app-profile-button>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Top Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6">
      <div class="flex items-center space-x-4">
        <!-- Mobile Menu Button -->
        <button
          class="lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200"
          (click)="toggleSidebar()"
        >
          <tui-icon class="w-5 h-5 text-gray-600" icon="@tui.menu"></tui-icon>
        </button>

        <h2 class="text-lg font-semibold text-gray-800">{{ title }}</h2>
      </div>

      <!-- Header Actions -->
      <div class="flex items-center space-x-4">
        <!-- Search -->
        <div class="relative hidden md:block">
          <input
            class="w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="Search..."
            type="text"
          />
          <tui-icon
            class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"
            icon="search"
          ></tui-icon>
        </div>

        <!-- Notifications -->
        <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 relative">
          <tui-icon class="w-5 h-5 text-gray-600" icon="bell"></tui-icon>
          <span
            class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-xs text-white flex items-center justify-center"
          >
            3
          </span>
        </button>

        <!-- Settings -->
        <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">
          <tui-icon class="w-5 h-5 text-gray-600" icon="settings"></tui-icon>
        </button>
      </div>
    </header>

    <!-- Page Content -->
    <main class="flex-1 overflow-auto bg-gray-50 p-6">
      <div class="max-w-7xl mx-auto">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
